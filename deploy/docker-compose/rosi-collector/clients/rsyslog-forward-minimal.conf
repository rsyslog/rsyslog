# Minimal rsyslog configuration for forwarding logs to ROSI Collector server
# 
# Quick Setup:
# 1. Replace "CHANGE_ME" below with your ROSI Collector server IP address
# 2. Copy to /etc/rsyslog.d/99-forward-to-central.conf
# 3. Ensure /var/spool/rsyslog directory exists: sudo mkdir -p /var/spool/rsyslog
# 4. Restart: sudo systemctl restart rsyslog
# 5. Test: logger "test message"
#
# ROSI Collector server accepts TCP on port 10514
#
# Resilience: This config uses disk-assisted queue to persist logs when
# central server is unavailable. Logs are stored on disk and forwarded
# automatically when connection is restored.

# Forward all logs via TCP with disk-assisted queue for resilience
*.* action(
    type="omfwd"
    target="CHANGE_ME"
    port="10514"
    protocol="tcp"
    queue.type="LinkedList"
    queue.size="10000"
    queue.saveOnShutdown="on"
    action.resumeRetryCount="-1"
    action.resumeInterval="10"
    queue.filename="forward-queue"
    queue.spoolDirectory="/var/spool/rsyslog"
    queue.maxDiskSpace="100m"
    queue.maxFileSize="10m"
)

